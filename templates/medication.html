{% extends 'main.html' %}

{% block title %} All mediactions {% endblock %}

{% block page %}
    {% if user.is_authenticated %}
        Hello, {{ user.username }} <br>
        <a href="{% url 'logout' %}">Logout</a>
    {% else %}
        <a href="{% url 'login' %}">Login</a>
    {% endif %}
    <hr>

    {% if medications|length == 0 %}
        <h2>You have no medication</h2>
        <a href="{% url 'new_medication' %}"><button type="button" class="btn btn-primary"><i class="fa-solid fa-plus" style="color: #ffffff;"></i> Add medication</button></a>
    {% else %}
        <a href="{% url 'new_medication' %}"><button type="button" class="btn btn-primary"><i class="fa-solid fa-plus" style="color: #ffffff;"></i> Add medication</button></a>
        <br><br>
        {% for medication in medications %}
            <div class="card" style="width: 26rem; background-color: whitesmoke;">
              <div class="card-body">
                  <img src="/media/{{ medication.picture }}" class="medication-picture">
                <div class="row">
                    <div class="col-9">
                        <h5 class="card-title">{{ medication.name_of_medication }}</h5>
                    </div>
                    <div class="col-3">
                        <a href="{% url 'update_medication' medication.id %}"><i class="fa-solid fa-pen-to-square" style="color: #80ceff"></i></a>
                        <a href="{% url 'delete_medication' medication.id %}"><i class="fa-solid fa-trash" style="color: #80ceff"></i></a>
                    </div>
                </div>
                <div class="row">
                    <p>{{ medication.dosage }} {{ medication.unit}} x {{ medication.times_per_day }} times per day</p>
                </div>
                <div class="row">
                    {% for n in medication.times_per_day|length %}
                    <div class="col-3">
                        <button type="button" class="btn btn-light"><i class="fa-solid fa-pills" style="color: #80ceff"></i></button>
                    </div>
                    {% endfor %}
                </div>
              </div>
            </div>

        <br>
        {% endfor %}
    {% endif %}
{% endblock %}